/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
import { Content } from '@google/genai';
import { BaseAgent } from '../agents/base_agent.js';
import { RunConfig } from '../agents/run_config.js';
import { BaseArtifactService } from '../artifacts/base_artifact_service.js';
import { BaseCredentialService } from '../auth/credential_service/base_credential_service.js';
import { Event } from '../events/event.js';
import { BaseMemoryService } from '../memory/base_memory_service.js';
import { BasePlugin } from '../plugins/base_plugin.js';
import { PluginManager } from '../plugins/plugin_manager.js';
import { BaseSessionService } from '../sessions/base_session_service.js';
/**
 * The configuration parameters for the Runner.
 */
export interface RunnerConfig {
    /**
     * The application name.
     */
    appName: string;
    /**
     * The agent to run.
     */
    agent: BaseAgent;
    plugins?: BasePlugin[];
    artifactService?: BaseArtifactService;
    sessionService: BaseSessionService;
    memoryService?: BaseMemoryService;
    credentialService?: BaseCredentialService;
}
export declare class Runner {
    readonly appName: string;
    readonly agent: BaseAgent;
    readonly pluginManager: PluginManager;
    readonly artifactService?: BaseArtifactService;
    readonly sessionService: BaseSessionService;
    readonly memoryService?: BaseMemoryService;
    readonly credentialService?: BaseCredentialService;
    constructor(input: RunnerConfig);
    /**
     * Runs the agent with the given message, and returns an async generator of
     * events.
     *
     * @param params.userId The user ID of the session.
     * @param params.sessionId The session ID of the session.
     * @param params.newMessage A new message to append to the session.
     * @param params.stateDelta An optional state delta to apply to the session.
     * @param params.runConfig The run config for the agent.
     * @yields The events generated by the agent.
     */
    runAsync(params: {
        userId: string;
        sessionId: string;
        newMessage: Content;
        stateDelta?: Record<string, any>;
        runConfig?: RunConfig;
    }): AsyncGenerator<Event, void, undefined>;
    /**
     * Saves artifacts from the message parts and replaces the inline data with
     * a file name placeholder.
     *
     * @param invocationId The current invocation ID.
     * @param userId The user ID of the session.
     * @param sessionId The session ID of the session.
     * @param message The message containing parts to process.
     */
    private saveArtifacts;
    /**
     * Determines the next agent to run to continue the session. This is primarily
     * used for session resumption.
     */
    private determineAgentForResumption;
    /**
     * Whether the agent to run can transfer to any other agent in the agent tree.
     *
     * An agent is transferable if:
     *  - It is an instance of `LlmAgent`.
     *  - All its ancestors are also transferable (i.e., they have
     *    `disallowTransferToParent` set to false).
     *
     * @param agentToRun The agent to check for transferability.
     * @returns True if the agent can transfer, False otherwise.
     */
    private isRoutableLlmAgent;
}
